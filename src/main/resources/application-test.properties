# ============================================================
# PERFIL DE TEST — BASE DE DATOS H2 EN MEMORIA
#
# Objetivo:
# Este perfil se usa exclusivamente para pruebas automáticas (JUnit, tests).
#
# Razones para NO usar MySQL en tests:
#  - Evita errores "Too many connections".
#  - No depende de Laragon ni de servicios externos.
#  - Es mucho más rápido.
#  - Cada test inicia una BD limpia.
# ============================================================


# ===========================
# CONFIGURACIÓN BASE DE DATOS H2
# ===========================

# URL de conexión a la base en memoria.
# jdbc:h2:mem:testdb     → base de datos en RAM (no se guarda en disco)
# MODE=MySQL             → simula comportamiento SQL similar a MySQL
# DB_CLOSE_DELAY=-1      → mantiene la BD viva mientras exista la JVM
spring.datasource.url=jdbc:h2:mem:testdb;MODE=MySQL;DB_CLOSE_DELAY=-1

# Driver específico de H2
spring.datasource.driver-class-name=org.h2.Driver

# Usuario por defecto de H2
spring.datasource.username=sa

# Contraseña vacía (configuración estándar de H2 en memoria)
spring.datasource.password=


# ===========================
# CONFIGURACIÓN JPA / HIBERNATE
# ===========================

# Crea todas las tablas al iniciar los tests y las elimina al finalizar.
# Ideal para asegurar tests limpios y consistentes.
spring.jpa.hibernate.ddl-auto=create-drop

# Dialecto para H2, permite que Hibernate genere SQL compatible con H2
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect

# No mostrar SQL en consola durante los tests.
# Esto mantiene los logs más limpios.
spring.jpa.show-sql=false


# ===========================
# HIKARI POOL (Conexiones)
# ===========================

# Tamaño máximo del pool de conexiones.
# Mantenerlo bajo evita saturaciones y mejora estabilidad en tests.
spring.datasource.hikari.maximum-pool-size=5