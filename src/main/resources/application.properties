spring.application.name=NoLimits

# ====================================================================================
# BASE DE DATOS (PRODUCCIÓN EN RENDER)
# ====================================================================================
# Estas variables vienen desde Render → Environment Variables.
# NO USAR localhost en producción.
spring.datasource.url=${SPRING_DATASOURCE_URL}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# Render recomienda SSL. Requerido para conexiones externas.
spring.datasource.hikari.data-source-properties.sslmode=require

# ====================================================================================
# JPA / HIBERNATE (PRODUCCIÓN)
# ====================================================================================
# En producción NO se debe borrar la base de datos. Se usa "update".
spring.jpa.hibernate.ddl-auto=update

# No mostrar SQL en producción (más rápido y seguro)
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false

# Dialecto CORRECTO para PostgreSQL en Render
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

spring.jackson.serialization.FAIL_ON_EMPTY_BEANS=false

# --------------------------EVALUACIÓN 3---------------------------------- #
# (Conservado tal cual lo tenías tú)
# Aquí están tus configuraciones para la EVALUACIÓN 3.

# ====================================================================================
# CONFIGURACIÓN DEL SERVIDOR
# ====================================================================================
# Render asigna el puerto automáticamente mediante la variable PORT.
# ${PORT:8080} significa: si PORT existe → úsalo; si no → usa 8080.
server.address=0.0.0.0
server.port=${PORT:8080}
server.forward-headers-strategy=framework

# Activa todas las clases marcadas con @Profile("dev") al iniciar el proyecto.
# IMPORTANTE: NO ACTIVAR dev EN PRODUCCIÓN (Esto activaría DataLoader y borraría datos)
#spring.profiles.active=dev

# ====================================================================================
# SWAGGER
# ====================================================================================
springdoc.api-docs.enabled=true
springdoc.swagger-ui.enabled=true
springdoc.swagger-ui.path=/doc/swagger-ui.html

# ====================================================================================
# UPTIMEROBOT + ACTUATOR (JAKEO - PREVENIR SLEEP EN RENDER)
# ====================================================================================
# Se expone el endpoint /actuator/health para que UptimeRobot haga ping cada 5 minutos.
# Esto evita que Render duerma el backend por inactividad.
management.endpoints.web.exposure.include=health,info

# Muestra detalles completos del estado de salud del servidor.
management.endpoint.health.show-details=always

# Se desactiva la seguridad automática de Spring Security tanto para la aplicación
# como para los endpoints de Actuator, permitiendo acceso libre a /health.
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration,org.springframework.boot.actuate.autoconfigure.security.servlet.ManagementWebSecurityAutoConfiguration

# ====================================================================================
# LOGGING (PRODUCCIÓN)
# ====================================================================================
# Mostrar solo información relevante, no modo DEBUG ni TRACE.
logging.level.org.hibernate=INFO
logging.level.org.springframework.transaction=INFO
logging.level.org.springframework.orm.jpa=INFO